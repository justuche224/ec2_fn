import{r as a,j as e,B as d,L as b,t as v}from"./index-BVlH3n0h.js";import{B as m}from"./badge-CiDXrPHU.js";import{T as w,a as S,b as h,c as r,d as E,e as t}from"./table-C0X7gbyH.js";import{S as L,a as R,b as A,c as D,d as n}from"./select-C4fw0IIL.js";import{g as C}from"./withdrawal-paypal-BOxj50Su.js";import{P as F}from"./plus-CqsmzbH9.js";import{F as T}from"./filter-BnCwasT0.js";import{L as W}from"./loader-circle-CnBdTBbm.js";import{E as B}from"./external-link-D6qukLRl.js";import"./index-gNPglWqf.js";import"./index-Tt_Gk8TM.js";import"./chevron-down-CXltBhww.js";import"./check-BGrFiPcB.js";function V(){const[l,f]=a.useState([]),[x,u]=a.useState([]),[c,j]=a.useState(!0),[i,g]=a.useState("ALL"),p=async()=>{try{j(!0);const s=await C();f(s),u(s)}catch{v.error("Failed to fetch your PayPal withdrawal history")}finally{j(!1)}};a.useEffect(()=>{let s=l;i!=="ALL"&&(s=s.filter(o=>o.status===i)),u(s)},[i,l]);const y=s=>new Date(s).toLocaleString(),N=(s,o)=>`${parseFloat(s).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})} ${o}`,P=s=>{switch(s){case"APPROVED":return e.jsx(m,{className:"bg-green-500",children:"Approved"});case"REJECTED":return e.jsx(m,{variant:"destructive",children:"Rejected"});default:return e.jsx(m,{variant:"outline",className:"bg-yellow-100 text-yellow-800",children:"Pending"})}};return a.useEffect(()=>{p()},[]),e.jsxs("div",{className:"container mx-auto py-6 md:w-[90%] lg:w-[85%] px-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"My PayPal Withdrawals"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(d,{onClick:p,variant:"outline",disabled:c,className:"cursor-pointer",children:c?"Loading...":"Refresh"}),e.jsx(d,{asChild:!0,className:"cursor-pointer bg-blue-600 hover:bg-blue-700",children:e.jsxs(b,{to:"/dashboard/withdraw/paypal",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"New PayPal Withdrawal"]})})]})]}),e.jsxs("div",{className:"mb-6 flex items-center justify-end gap-2",children:[e.jsx(T,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs(L,{value:i,onValueChange:g,children:[e.jsx(R,{className:"w-[180px]",children:e.jsx(A,{placeholder:"Filter by Status"})}),e.jsxs(D,{children:[e.jsx(n,{value:"ALL",children:"All Statuses"}),e.jsx(n,{value:"PENDING",children:"Pending"}),e.jsx(n,{value:"APPROVED",children:"Approved"}),e.jsx(n,{value:"REJECTED",children:"Rejected"})]})]})]}),c?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(W,{className:"animate-spin",size:40})}):e.jsx("div",{className:"bg-sidebar rounded-lg shadow overflow-hidden",children:e.jsxs(w,{children:[e.jsx(S,{children:e.jsxs(h,{children:[e.jsx(r,{children:"Date"}),e.jsx(r,{children:"PayPal Email"}),e.jsx(r,{children:"PayPal Name"}),e.jsx(r,{children:"Amount"}),e.jsx(r,{children:"Status"}),e.jsx(r,{className:"text-right",children:"Details"})]})}),e.jsx(E,{children:x.length===0?e.jsx(h,{children:e.jsx(t,{colSpan:6,className:"text-center py-8",children:l.length===0?"No PayPal withdrawals found":"No PayPal withdrawals match your filter criteria"})}):x.map(s=>e.jsxs(h,{children:[e.jsx(t,{children:y(s.createdAt)}),e.jsx(t,{children:s.paypalEmail}),e.jsx(t,{children:s.paypalName}),e.jsx(t,{className:"font-medium",children:N(s.amount,s.currency)}),e.jsxs(t,{children:[P(s.status),s.rejectionReason&&e.jsxs("div",{className:"text-xs text-red-500 mt-1",children:["Reason: ",s.rejectionReason]})]}),e.jsx(t,{className:"text-right",children:e.jsx(d,{variant:"ghost",size:"sm",className:"cursor-pointer text-blue-500",children:e.jsx(B,{className:"h-4 w-4"})})})]},s.id))})]})})]})}const Y=function(){return e.jsx(V,{})};export{Y as component};
