import{r,j as e,B as d,L as p,t as L}from"./index-BVlH3n0h.js";import{B as c}from"./badge-CiDXrPHU.js";import{T as v,a as D,b as x,c as l,d as A,e as t}from"./table-C0X7gbyH.js";import{S,a as w,b as k,c as y,d as a}from"./select-C4fw0IIL.js";import{b as R}from"./bank-ClR9H3yU.js";import{F as T}from"./filter-BnCwasT0.js";import{L as B}from"./loader-circle-CnBdTBbm.js";import{E as F}from"./external-link-D6qukLRl.js";import"./index-gNPglWqf.js";import"./index-Tt_Gk8TM.js";import"./chevron-down-CXltBhww.js";import"./check-BGrFiPcB.js";function P(){const[n,f]=r.useState([]),[h,m]=r.useState([]),[o,j]=r.useState(!0),[i,N]=r.useState("ALL"),u=async()=>{try{j(!0);const s=await R();f(s),m(s)}catch{L.error("Failed to fetch your Bank deposit history")}finally{j(!1)}};r.useEffect(()=>{let s=n;i!=="ALL"&&(s=s.filter(E=>E.status===i)),m(s)},[i,n]);const b=s=>new Date(s).toLocaleString(),C=s=>`$${parseFloat(s).toFixed(2)}`,g=s=>{switch(s){case"APPROVED":case"ACTIVE":case"COMPLETED":return e.jsx(c,{className:"bg-green-500",children:s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()});case"REJECTED":case"FAILED":case"CANCELLED":return e.jsx(c,{variant:"destructive",children:s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()});case"PROCESSING":return e.jsx(c,{className:"bg-blue-500",children:s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()});default:return e.jsx(c,{variant:"outline",className:"bg-yellow-100 text-yellow-800",children:s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()})}};return r.useEffect(()=>{u()},[]),e.jsxs("div",{className:"container mx-auto py-6 md:w-[90%] lg:w-[85%] px-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"My Bank Deposits"})," ",e.jsxs("div",{className:"flex gap-3",children:[e.jsx(d,{asChild:!0,children:e.jsx(p,{to:"/dashboard/deposit/bank/new",children:"Make Deposit"})})," ",e.jsx(d,{onClick:u,variant:"outline",disabled:o,className:"cursor-pointer",children:o?"Loading...":"Refresh"})]})]}),e.jsxs("div",{className:"mb-6 flex items-center justify-end gap-2",children:[e.jsx(T,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs(S,{value:i,onValueChange:N,children:[e.jsx(w,{className:"w-[180px]",children:e.jsx(k,{placeholder:"Filter by Status"})}),e.jsxs(y,{children:[e.jsx(a,{value:"ALL",children:"All Statuses"}),e.jsx(a,{value:"PENDING",children:"Pending"}),e.jsx(a,{value:"PROCESSING",children:"Processing"}),e.jsx(a,{value:"APPROVED",children:"Approved"}),e.jsx(a,{value:"REJECTED",children:"Rejected"}),e.jsx(a,{value:"FAILED",children:"Failed"}),e.jsx(a,{value:"ACTIVE",children:"Active"}),e.jsx(a,{value:"COMPLETED",children:"Completed"}),e.jsx(a,{value:"CANCELLED",children:"Cancelled"})]})]})]}),o?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(B,{className:"animate-spin",size:40})}):e.jsx("div",{className:"bg-sidebar rounded-lg shadow overflow-hidden",children:e.jsxs(v,{children:[e.jsx(D,{children:e.jsxs(x,{children:[e.jsx(l,{children:"Date"}),e.jsx(l,{children:"Bank Name"}),e.jsx(l,{children:"Account Name"}),e.jsx(l,{children:"Amount"}),e.jsx(l,{children:"Status"}),e.jsx(l,{className:"text-right",children:"Details"})]})}),e.jsx(A,{children:h.length===0?e.jsx(x,{children:e.jsx(t,{colSpan:6,className:"text-center py-8",children:n.length===0?"No Bank deposits found":"No Bank deposits match your filter criteria"})}):h.map(s=>e.jsxs(x,{children:[e.jsx(t,{children:b(s.createdAt)}),e.jsx(t,{className:"text-sm",children:s.bankName}),e.jsx(t,{className:"text-sm",children:s.bankAccountName}),e.jsx(t,{className:"font-medium",children:C(s.amount)}),e.jsxs(t,{children:[g(s.status),s.rejectionReason&&e.jsxs("div",{className:"text-xs text-red-500 mt-1",children:["Reason: ",s.rejectionReason]})]}),e.jsx(t,{className:"text-right",children:e.jsx(d,{asChild:!0,variant:"ghost",size:"sm",className:"cursor-pointer text-blue-500",children:e.jsx(p,{to:"/dashboard/deposit/bank/$bankId",params:{bankId:s.id},children:e.jsx(F,{className:"h-4 w-4"})})})})]},s.id))})]})})]})}const Q=function(){return e.jsx(P,{})};export{Q as component};
