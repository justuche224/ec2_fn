import{r as a,j as e,B as d,L as w,t as y}from"./index-BVlH3n0h.js";import{B as m}from"./badge-CiDXrPHU.js";import{T as S,a as A,b as h,c as r,d as C,e as t}from"./table-C0X7gbyH.js";import{S as E,a as L,b as R,c as D,d as n}from"./select-C4fw0IIL.js";import{g as F}from"./withdrawal-cashapp-CDLNZERi.js";import{P}from"./plus-CqsmzbH9.js";import{F as T}from"./filter-BnCwasT0.js";import{L as W}from"./loader-circle-CnBdTBbm.js";import{E as B}from"./external-link-D6qukLRl.js";import"./index-gNPglWqf.js";import"./index-Tt_Gk8TM.js";import"./chevron-down-CXltBhww.js";import"./check-BGrFiPcB.js";function V(){const[l,f]=a.useState([]),[x,u]=a.useState([]),[c,j]=a.useState(!0),[i,g]=a.useState("ALL"),p=async()=>{try{j(!0);const s=await F();f(s),u(s)}catch{y.error("Failed to fetch your CashApp withdrawal history")}finally{j(!1)}};a.useEffect(()=>{let s=l;i!=="ALL"&&(s=s.filter(o=>o.status===i)),u(s)},[i,l]);const N=s=>new Date(s).toLocaleString(),b=(s,o)=>`${parseFloat(s).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})} ${o}`,v=s=>{switch(s){case"APPROVED":return e.jsx(m,{className:"bg-green-500",children:"Approved"});case"REJECTED":return e.jsx(m,{variant:"destructive",children:"Rejected"});default:return e.jsx(m,{variant:"outline",className:"bg-yellow-100 text-yellow-800",children:"Pending"})}};return a.useEffect(()=>{p()},[]),e.jsxs("div",{className:"container mx-auto py-6 md:w-[90%] lg:w-[85%] px-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"My CashApp Withdrawals"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(d,{onClick:p,variant:"outline",disabled:c,className:"cursor-pointer",children:c?"Loading...":"Refresh"}),e.jsx(d,{asChild:!0,className:"cursor-pointer bg-blue-600 hover:bg-blue-700",children:e.jsxs(w,{to:"/dashboard/withdraw/cash-app",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"New CashApp Withdrawal"]})})]})]}),e.jsxs("div",{className:"mb-6 flex items-center justify-end gap-2",children:[e.jsx(T,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs(E,{value:i,onValueChange:g,children:[e.jsx(L,{className:"w-[180px]",children:e.jsx(R,{placeholder:"Filter by Status"})}),e.jsxs(D,{children:[e.jsx(n,{value:"ALL",children:"All Statuses"}),e.jsx(n,{value:"PENDING",children:"Pending"}),e.jsx(n,{value:"APPROVED",children:"Approved"}),e.jsx(n,{value:"REJECTED",children:"Rejected"})]})]})]}),c?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(W,{className:"animate-spin",size:40})}):e.jsx("div",{className:"bg-sidebar rounded-lg shadow overflow-hidden",children:e.jsxs(S,{children:[e.jsx(A,{children:e.jsxs(h,{children:[e.jsx(r,{children:"Date"}),e.jsx(r,{children:"Cashtag"}),e.jsx(r,{children:"Full Name"}),e.jsx(r,{children:"Amount"}),e.jsx(r,{children:"Status"}),e.jsx(r,{className:"text-right",children:"Details"})]})}),e.jsx(C,{children:x.length===0?e.jsx(h,{children:e.jsx(t,{colSpan:6,className:"text-center py-8",children:l.length===0?"No CashApp withdrawals found":"No CashApp withdrawals match your filter criteria"})}):x.map(s=>e.jsxs(h,{children:[e.jsx(t,{children:N(s.createdAt)}),e.jsx(t,{className:"font-mono text-sm",children:s.cashtag}),e.jsx(t,{children:s.cashappName}),e.jsx(t,{className:"font-medium",children:b(s.amount,s.currency)}),e.jsxs(t,{children:[v(s.status),s.rejectionReason&&e.jsxs("div",{className:"text-xs text-red-500 mt-1",children:["Reason: ",s.rejectionReason]})]}),e.jsx(t,{className:"text-right",children:e.jsx(d,{variant:"ghost",size:"sm",className:"cursor-pointer text-blue-500",children:e.jsx(B,{className:"h-4 w-4"})})})]},s.id))})]})})]})}const Y=function(){return e.jsx(V,{})};export{Y as component};
