import{r as t,j as e,B as d,L as u,t as L}from"./index-BVlH3n0h.js";import{B as n}from"./badge-CiDXrPHU.js";import{T as v,a as D,b as x,c as l,d as P,e as r}from"./table-C0X7gbyH.js";import{S as b,a as S,b as A,c as w,d as a}from"./select-C4fw0IIL.js";import{b as R}from"./paypal-HHWK-B4W.js";import{F as T}from"./filter-BnCwasT0.js";import{L as F}from"./loader-circle-CnBdTBbm.js";import{E as I}from"./external-link-D6qukLRl.js";import"./index-gNPglWqf.js";import"./index-Tt_Gk8TM.js";import"./chevron-down-CXltBhww.js";import"./check-BGrFiPcB.js";function B(){const[i,f]=t.useState([]),[h,m]=t.useState([]),[o,p]=t.useState(!0),[c,C]=t.useState("ALL"),j=async()=>{try{p(!0);const s=await R();f(s),m(s)}catch{L.error("Failed to fetch your PayPal deposit history")}finally{p(!1)}};t.useEffect(()=>{let s=i;c!=="ALL"&&(s=s.filter(y=>y.status===c)),m(s)},[c,i]);const E=s=>new Date(s).toLocaleString(),N=s=>`$${parseFloat(s).toFixed(2)}`,g=s=>{switch(s){case"APPROVED":case"ACTIVE":case"COMPLETED":return e.jsx(n,{className:"bg-green-500",children:s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()});case"REJECTED":case"FAILED":case"CANCELLED":return e.jsx(n,{variant:"destructive",children:s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()});case"PROCESSING":return e.jsx(n,{className:"bg-blue-500",children:s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()});default:return e.jsx(n,{variant:"outline",className:"bg-yellow-100 text-yellow-800",children:s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()})}};return t.useEffect(()=>{j()},[]),e.jsxs("div",{className:"container mx-auto py-6 md:w-[90%] lg:w-[85%] px-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"My PayPal Deposits"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(d,{asChild:!0,children:e.jsx(u,{to:"/dashboard/deposit/paypal/new",children:"Make Deposit"})}),e.jsx(d,{onClick:j,variant:"outline",disabled:o,className:"cursor-pointer",children:o?"Loading...":"Refresh"})]})]}),e.jsxs("div",{className:"mb-6 flex items-center justify-end gap-2",children:[e.jsx(T,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs(b,{value:c,onValueChange:C,children:[e.jsx(S,{className:"w-[180px]",children:e.jsx(A,{placeholder:"Filter by Status"})}),e.jsxs(w,{children:[e.jsx(a,{value:"ALL",children:"All Statuses"}),e.jsx(a,{value:"PENDING",children:"Pending"}),e.jsx(a,{value:"PROCESSING",children:"Processing"}),e.jsx(a,{value:"APPROVED",children:"Approved"}),e.jsx(a,{value:"REJECTED",children:"Rejected"}),e.jsx(a,{value:"FAILED",children:"Failed"}),e.jsx(a,{value:"ACTIVE",children:"Active"}),e.jsx(a,{value:"COMPLETED",children:"Completed"}),e.jsx(a,{value:"CANCELLED",children:"Cancelled"})]})]})]}),o?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(F,{className:"animate-spin",size:40})}):e.jsx("div",{className:"bg-sidebar rounded-lg shadow overflow-hidden",children:e.jsxs(v,{children:[e.jsx(D,{children:e.jsxs(x,{children:[e.jsx(l,{children:"Date"}),e.jsx(l,{children:"PayPal Email"}),e.jsx(l,{children:"Amount"}),e.jsx(l,{children:"Status"}),e.jsx(l,{className:"text-right",children:"Details"})]})}),e.jsx(P,{children:h.length===0?e.jsx(x,{children:e.jsx(r,{colSpan:5,className:"text-center py-8",children:i.length===0?"No PayPal deposits found":"No PayPal deposits match your filter criteria"})}):h.map(s=>e.jsxs(x,{children:[e.jsx(r,{children:E(s.createdAt)}),e.jsx(r,{className:"font-mono text-sm",children:s.paypalEmail}),e.jsx(r,{className:"font-medium",children:N(s.amount)}),e.jsxs(r,{children:[g(s.status),s.rejectionReason&&e.jsxs("div",{className:"text-xs text-red-500 mt-1",children:["Reason: ",s.rejectionReason]})]}),e.jsx(r,{className:"text-right",children:e.jsx(d,{asChild:!0,variant:"ghost",size:"sm",className:"cursor-pointer text-blue-500",children:e.jsx(u,{to:"/dashboard/deposit/paypal/$paypalId",params:{paypalId:s.id},children:e.jsx(I,{className:"h-4 w-4"})})})})]},s.id))})]})})]})}const Q=function(){return e.jsx(B,{})};export{Q as component};
