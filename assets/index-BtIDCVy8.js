import{e as U,j as e,c as k,L as S,B as h,a as R,r as l,D as M,w as $,x as O,y as W,A as P,E as D,a4 as X,u as H,a5 as _,a6 as z}from"./index-Caxnq4fP.js";import{C as g,a as N,b as y,c as L,d as w,e as Y}from"./card-BMh53kiZ.js";import{a as E,C as T}from"./credit-card-CkNReBzG.js";import{T as B}from"./trending-up-Dbum0I8w.js";import{P as G}from"./plus-DDgGMk01.js";import{g as K,a as q,b as J}from"./stats-DPj8iKsQ.js";import{L as A}from"./loader-Cza6yJ2g.js";import{C as Q}from"./chart-line-BxrtuGdz.js";import{L as F}from"./loader-circle-CEWipKhR.js";import{A as V}from"./arrow-right-Scye9rVB.js";/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],ee=U("CircleArrowUp",Z);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],te=U("Ellipsis",se);function ae({heading:a,text:t,children:r,className:n}){return e.jsxs("div",{className:k("flex flex-col gap-1",n),children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:a}),t&&e.jsx("p",{className:"text-muted-foreground",children:t}),r]})}function re({children:a,className:t,...r}){return e.jsx("div",{className:k("grid items-start gap-4 sm:gap-8 px-2 sm:px-4",t),...r,children:a})}function ne({className:a,...t}){return e.jsxs(g,{className:k("",a),...t,children:[e.jsxs(N,{children:[e.jsx(y,{children:"Quick Actions"}),e.jsx(L,{children:"Perform common tasks with one click"})]}),e.jsxs(w,{className:"grid gap-4",children:[e.jsx(S,{to:"/dashboard/deposit/crypto",children:e.jsxs(h,{className:"w-full justify-start gap-2 cursor-pointer",children:[e.jsx(E,{className:"h-4 w-4"}),"Deposit Funds (Crypto)"]})}),e.jsx(S,{to:"/dashboard/deposit/paypal",children:e.jsxs(h,{className:"w-full justify-start gap-2 cursor-pointer",children:[e.jsx(E,{className:"h-4 w-4"}),"Deposit Funds (Paypal)"]})}),e.jsx(S,{to:"/dashboard/deposit/cash-app",children:e.jsxs(h,{className:"w-full justify-start gap-2 cursor-pointer",children:[e.jsx(E,{className:"h-4 w-4"}),"Deposit Funds (Cash App)"]})}),e.jsx(S,{to:"/dashboard/withdraw",children:e.jsxs(h,{className:"w-full justify-start gap-2 cursor-pointer",children:[e.jsx(T,{className:"h-4 w-4"}),"Withdraw Funds"]})}),e.jsx(S,{to:"/dashboard/plans",children:e.jsxs(h,{className:"w-full justify-start gap-2 cursor-pointer",children:[e.jsx(B,{className:"h-4 w-4"}),"New Investment"]})}),e.jsx(S,{to:"/dashboard/account/wallet",children:e.jsxs(h,{className:"w-full justify-start gap-2 cursor-pointer",variant:"outline",children:[e.jsx(G,{className:"h-4 w-4"}),"Add Payment Method"]})})]})]})}function ie(){const{data:a,isPending:t,error:r}=R.useSession(),[n,p]=l.useState(null),[c,d]=l.useState(!0),[f,u]=l.useState("All");async function C(s){try{d(!0);const o=await K(s);p(o)}catch(o){console.error("Error fetching transaction history:",o)}finally{d(!1)}}l.useEffect(()=>{t||r||!a||C(a.user.id)},[a,t,r]);const v=s=>{const o=new Date(s),i=new Date,x=new Date(i);return x.setDate(x.getDate()-1),o.toDateString()===i.toDateString()?`Today, ${o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:o.toDateString()===x.toDateString()?`Yesterday, ${o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:`${o.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}, ${o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`},m=s=>{switch(s.type){case"deposit":return`Deposit (${s.currency})`;case"withdrawal":return`Withdrawal (${s.currency})`;case"investment":return`Investment (${s.currency})`;default:return`Transaction (${s.currency})`}},b=n==null?void 0:n.transactions.filter(s=>f==="All"?!0:s.type.toLowerCase()===f.toLowerCase());return e.jsxs(g,{children:[e.jsxs(N,{className:"flex flex-row items-center justify-between space-y-0",children:[e.jsxs("div",{children:[e.jsx(y,{children:"Recent Activity"}),e.jsx(L,{children:"Your latest transactions and updates"})]}),e.jsxs(M,{children:[e.jsx($,{asChild:!0,children:e.jsxs(h,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(te,{className:"h-4 w-4"})]})}),e.jsxs(O,{align:"end",children:[e.jsx(W,{children:"Filter by"}),e.jsx(P,{}),e.jsx(D,{onClick:()=>u("All"),children:"All"}),e.jsx(D,{onClick:()=>u("Deposit"),children:"Deposits"}),e.jsx(D,{onClick:()=>u("Withdrawal"),children:"Withdrawals"}),e.jsx(D,{onClick:()=>u("Investment"),children:"Investments"})]})]})]}),e.jsx(w,{children:c?e.jsx("div",{className:"py-6 text-center text-muted-foreground grid place-content-center",children:e.jsx(A,{className:"animate-spin",size:50})}):!n||n.transactions.length===0?e.jsx("div",{className:"py-6 text-center text-muted-foreground",children:"No transaction history found"}):e.jsx("div",{className:"space-y-4",children:b==null?void 0:b.map(s=>e.jsxs("div",{className:"flex items-center justify-between space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`rounded-full p-2 ${s.type==="deposit"?"bg-primary/10":s.type==="withdrawal"?"bg-destructive/10":"bg-primary/10"}`,children:s.type==="deposit"?e.jsx(E,{className:"h-4 w-4 text-primary"}):s.type==="withdrawal"?e.jsx(ee,{className:"h-4 w-4 text-destructive"}):e.jsx(Q,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:m(s)}),e.jsx("p",{className:"text-sm text-muted-foreground",children:v(s.createdAt)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Status: ",s.status]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`text-sm font-medium ${s.type==="withdrawal"?"text-destructive":""}`,children:[s.type==="withdrawal"?"-":"+",parseFloat(s.amount).toLocaleString()," ",s.currency]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.type.charAt(0).toUpperCase()+s.type.slice(1)})]})]},s.id))})})]})}function le({userId:a}){var v,m,b,s,o;const[t,r]=l.useState({data:null,loading:!0,error:""}),[n,p]=l.useState({data:null,loading:!0,error:""}),[c,d]=l.useState({data:null,loading:!0,error:""});async function f(){try{r(j=>({...j,loading:!0,error:""}));const x=(await X()).reduce((j,I)=>j+I.totalAmount,0);r({data:x,loading:!1,error:""})}catch{r({data:null,loading:!1,error:"Failed to fetch withdrawals"})}}async function u(){try{d(j=>({...j,loading:!0,error:""}));const i=await J(a),x=Object.values(i.totalInvestedAmountByCurrency).reduce((j,I)=>j+parseFloat(I),0);d({data:{...i,totalInvestmentAmount:x},loading:!1,error:""})}catch(i){d({data:null,loading:!1,error:i instanceof Error?i.message:"Error loading investment info"})}}async function C(){try{p(x=>({...x,loading:!0,error:""}));const i=await q(a);p({data:i,loading:!1,error:""})}catch(i){p({data:null,loading:!1,error:i instanceof Error?i.message:"Error loading referral info"})}}return l.useEffect(()=>{f(),C(),u()},[a]),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(g,{children:[e.jsxs(N,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(y,{className:"text-sm font-medium",children:"Total Investments"}),e.jsx(B,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(w,{children:c.loading?e.jsx("div",{className:"text-2xl font-bold",children:e.jsx(A,{className:"animate-spin"})}):c.error?e.jsx("div",{className:"text-sm text-red-500",children:c.error}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",((v=c.data)==null?void 0:v.totalInvestmentAmount.toFixed(2))||"0.00"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:((m=c.data)==null?void 0:m.totalCount)||0})," investment(s)"]})]})})]}),e.jsxs(g,{children:[e.jsxs(N,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(y,{className:"text-sm font-medium",children:"Total Withdrawals"}),e.jsx(T,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(w,{children:t.loading?e.jsx("div",{className:"text-2xl font-bold",children:e.jsx(A,{className:"animate-spin"})}):t.error?e.jsx("div",{className:"text-sm text-red-500",children:t.error}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"text-2xl font-bold",children:["$",((b=t.data)==null?void 0:b.toFixed(2))||"0.00"]})})})]}),e.jsxs(g,{children:[e.jsxs(N,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(y,{className:"text-sm font-medium",children:"Referral Earnings"}),e.jsx(T,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(w,{children:n.loading?e.jsx("div",{className:"text-2xl font-bold",children:e.jsx(A,{className:"animate-spin"})}):n.error?e.jsx("div",{className:"text-sm text-red-500",children:n.error}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",((s=n.data)==null?void 0:s.totalRewards)||"0.00"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:((o=n.data)==null?void 0:o.totalReferrals)||0})," referral(s)"]})]})})]})]})}function oe(){const{data:a,isPending:t,error:r}=R.useSession(),[n,p]=l.useState(0),[c,d]=l.useState(!1),[f,u]=l.useState(""),C=H();return l.useEffect(()=>{async function v(){d(!0);try{const m=await _();p(m)}catch(m){u(m instanceof Error?m.message:"Failed to load balance")}finally{d(!1)}}v()},[]),r?null:e.jsxs(g,{className:"bg-gradient-to-r from-primary/10 via-primary/5 to-background border-primary/20",children:[e.jsxs(N,{children:[e.jsxs(y,{className:"text-xl flex items-center",children:["Welcome back,"," ",t?e.jsx(F,{className:"animate-spin my-auto ml-5",size:20}):(a==null?void 0:a.user.name)||"User"]}),e.jsx(L,{children:"Your portfolio is performing well. Here's a summary of your financial status."})]}),e.jsx(w,{children:f?e.jsx("div",{className:"text-3xl font-bold",children:f}):c?e.jsx("div",{className:"text-3xl font-bold",children:e.jsx(F,{className:"animate-spin",size:40})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-3xl font-bold",children:["$",new Intl.NumberFormat("en-US").format(n)]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Total balance across all accounts"})]})}),e.jsx(Y,{children:e.jsxs(h,{variant:"outline",className:"gap-1 cursor-pointer",onClick:()=>C({to:"/dashboard/all-history"}),children:["View portfolio details ",e.jsx(V,{className:"h-4 w-4"})]})})]})}function ce(){const a=l.useRef(null);return l.useEffect(()=>{const t=document.createElement("script");t.src="https://s3.tradingview.com/external-embedding/embed-widget-market-quotes.js",t.async=!0,t.innerHTML=JSON.stringify({width:"100%",height:400,symbolsGroups:[{name:"Crypto",symbols:[{name:"BINANCE:BTCUSDT",displayName:"Bitcoin"},{name:"BINANCE:ETHUSDT",displayName:"Ethereum"},{name:"BINANCE:XRPUSDT",displayName:"Ripple"},{name:"BINANCE:BNBUSDT",displayName:"Binance Coin"},{name:"BINANCE:DOGEUSDT",displayName:"Dogecoin"},{name:"BINANCE:SOLUSDT",displayName:"Solana"}]},{name:"Indices",originalName:"Indices",symbols:[{name:"FOREXCOM:SPXUSD",displayName:"S&P 500"},{name:"FOREXCOM:NSXUSD",displayName:"US 100"},{name:"FOREXCOM:DJI",displayName:"Dow 30"},{name:"INDEX:NKY",displayName:"Nikkei 225"},{name:"INDEX:DEU40",displayName:"DAX Index"},{name:"FOREXCOM:UKXGBP",displayName:"UK 100"}]}],showSymbolLogo:!0,colorTheme:"light",isTransparent:!1,locale:"en"});const r=document.querySelector(".tradingview-widget-container");return r&&(r.appendChild(t),a.current=t),()=>{a.current&&a.current.parentNode&&a.current.parentNode.removeChild(a.current)}},[]),e.jsxs(g,{className:"h-full",children:[e.jsx(N,{children:e.jsx(y,{children:"Market Data"})}),e.jsx(w,{className:"p-0",children:e.jsx("div",{className:"tradingview-widget-container h-[400px]",children:e.jsx("div",{className:"tradingview-widget-container__widget h-full"})})})]})}const ye=function(){const{user:t}=z.useLoaderData();return console.log(t),e.jsxs(re,{children:[e.jsx(ae,{heading:"Dashboard",text:"Welcome back to your financial overview."}),e.jsxs("div",{className:"grid gap-4 md:gap-6",children:[e.jsx(oe,{}),e.jsx(le,{userId:t.id}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-7 lg:grid-cols-12",children:[e.jsx("div",{className:"md:col-span-4 lg:col-span-8 overflow-hidden",children:e.jsx(ce,{})}),e.jsx("div",{className:"md:col-span-3 lg:col-span-4 overflow-hidden",children:e.jsx(ne,{className:"w-full"})})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:e.jsx("div",{className:"overflow-hidden",children:e.jsx(ie,{})})})]})]})};export{ye as component};
