import{b4 as f,r as x,u as S,z as o,j as e,B as R,b5 as A}from"./index-Caxnq4fP.js";import{A as F}from"./accent-card-BxygF2E5.js";import{u as w,s as q,F as C,a as i,b as a,c as l,d as c,e as m}from"./form-MhCTnVIA.js";import{F as N,a as v}from"./form-success-DjkpuRcg.js";import{I as d}from"./input-9dZTne-k.js";import{L as E}from"./loader-circle-CEWipKhR.js";import"./card-BMh53kiZ.js";import"./proxy-if3s5L3i.js";import"./label-CnkdeUHA.js";import"./circle-alert-BlkNPLzr.js";import"./check-PSB7j7kI.js";const L=o.object({type:o.string().min(1),price:o.string().min(1),minRoiAmount:o.string().min(1),maxRoiAmount:o.string().min(1),commission:o.string().min(1),percentage:o.string().min(1),duration:o.string().min(1),description:o.string().min(1)}),O=function(){const{plan:s}=f.useLoaderData(),[n,h]=x.useTransition(),[g,u]=x.useState(""),[P,p]=x.useState(""),y=S(),t=w({resolver:q(L),defaultValues:{type:s.type,price:s.price.toString(),minRoiAmount:s.minRoiAmount.toString(),maxRoiAmount:s.maxRoiAmount.toString(),commission:s.commission.toString(),percentage:s.percentage.toString(),duration:s.duration.toString(),description:s.description}});function b(r){u(void 0),p(void 0),h(async()=>{try{await A(s.id,r),p("Plan Created"),y({to:"/admin/plans"})}catch(j){u(j instanceof Error?j.message:"Failed to update plan")}})}return e.jsx("div",{className:"h-full flex justify-center mt-10 container max-w-2xl w-full mx-auto",children:e.jsx(F,{className:"max-w-2xl mx-auto lg:w-2xl md:w-xl sm:w-lg",title:"New Plan",description:"Create a new Plan",children:e.jsx(C,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(b),className:"space-y-6",children:[e.jsx(i,{control:t.control,name:"type",disabled:n,render:({field:r})=>e.jsxs(a,{children:[e.jsx(l,{children:"Plan Type"}),e.jsx(c,{children:e.jsx(d,{...r,type:"text",placeholder:"Plan Type e.g Premium,Starter...",required:!0})}),e.jsx(m,{})]})}),e.jsx(i,{control:t.control,name:"price",disabled:n,render:({field:r})=>e.jsxs(a,{children:[e.jsx(l,{children:"Plan Price"}),e.jsx(c,{children:e.jsx(d,{...r,type:"text",placeholder:"Plan Price e.g 1000",required:!0})}),e.jsx(m,{})]})}),e.jsx(i,{control:t.control,name:"minRoiAmount",disabled:n,render:({field:r})=>e.jsxs(a,{children:[e.jsx(l,{children:"Plan minRoiAmount"}),e.jsx(c,{children:e.jsx(d,{...r,type:"text",placeholder:"Plan minRoiAmount",required:!0})}),e.jsx(m,{})]})}),e.jsx(i,{control:t.control,name:"maxRoiAmount",disabled:n,render:({field:r})=>e.jsxs(a,{children:[e.jsx(l,{children:"Plan maxRoiAmount"}),e.jsx(c,{children:e.jsx(d,{...r,type:"text",placeholder:"Plan maxRoiAmount",required:!0})}),e.jsx(m,{})]})}),e.jsx(i,{control:t.control,name:"commission",disabled:n,render:({field:r})=>e.jsxs(a,{children:[e.jsx(l,{children:"Plan commission"}),e.jsx(c,{children:e.jsx(d,{...r,type:"text",placeholder:"Plan commission",required:!0})}),e.jsx(m,{})]})}),e.jsx(i,{control:t.control,name:"percentage",disabled:n,render:({field:r})=>e.jsxs(a,{children:[e.jsx(l,{children:"Plan percentage"}),e.jsx(c,{children:e.jsx(d,{...r,type:"text",placeholder:"Plan percentage",required:!0})}),e.jsx(m,{})]})}),e.jsx(i,{control:t.control,name:"duration",disabled:n,render:({field:r})=>e.jsxs(a,{children:[e.jsx(l,{children:"Plan duration"}),e.jsx(c,{children:e.jsx(d,{...r,type:"text",placeholder:"Plan duration",required:!0})}),e.jsx(m,{})]})}),e.jsx(i,{control:t.control,name:"description",disabled:n,render:({field:r})=>e.jsxs(a,{children:[e.jsx(l,{children:"Plan description"}),e.jsx(c,{children:e.jsx(d,{...r,type:"text",placeholder:"Plan description",required:!0})}),e.jsx(m,{})]})}),e.jsx(N,{message:g}),e.jsx(v,{message:P}),e.jsx(R,{disabled:n,type:"submit",className:"w-full",children:n?e.jsx(E,{className:"h-4 w-4 animate-spin"}):"Create Plan"})]})})})})};export{O as component};
