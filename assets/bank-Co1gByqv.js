import{r,j as e,B as d,L as S,t as w}from"./index-BKI1WJFD.js";import{B as m}from"./badge-BJ3fx28W.js";import{T as A,a as k,b as u,c as a,d as E,e as t}from"./table-B6S2DC1P.js";import{S as L,a as R,b as D,c as C,d as l}from"./select-B-3lH2JU.js";import{g as B}from"./withdrawal-bank-piYzQrHu.js";import{P as F}from"./plus-DAZCbubW.js";import{F as P}from"./filter-B8QTzNSz.js";import{L as T}from"./loader-circle-DVwTj61m.js";import{E as W}from"./external-link-Cm6kts4i.js";import"./index-s_LgtPrL.js";import"./index-DlJsYnWQ.js";import"./chevron-down-9ebR-WP6.js";import"./check-BSI6iiZe.js";function V(){const[n,p]=r.useState([]),[x,h]=r.useState([]),[c,j]=r.useState(!0),[i,g]=r.useState("ALL"),f=async()=>{try{j(!0);const s=await B();p(s),h(s)}catch{w.error("Failed to fetch your bank withdrawal history")}finally{j(!1)}};r.useEffect(()=>{let s=n;i!=="ALL"&&(s=s.filter(o=>o.status===i)),h(s)},[i,n]);const N=s=>new Date(s).toLocaleString(),b=(s,o)=>`${parseFloat(s).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})} ${o}`,v=s=>s.length<=4?s:`****${s.slice(-4)}`,y=s=>{switch(s){case"APPROVED":return e.jsx(m,{className:"bg-green-500",children:"Approved"});case"REJECTED":return e.jsx(m,{variant:"destructive",children:"Rejected"});default:return e.jsx(m,{variant:"outline",className:"bg-yellow-100 text-yellow-800",children:"Pending"})}};return r.useEffect(()=>{f()},[]),e.jsxs("div",{className:"container mx-auto py-6 md:w-[90%] lg:w-[85%] px-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"My Bank Withdrawals"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(d,{onClick:f,variant:"outline",disabled:c,className:"cursor-pointer",children:c?"Loading...":"Refresh"}),e.jsx(d,{asChild:!0,className:"cursor-pointer bg-blue-600 hover:bg-blue-700",children:e.jsxs(S,{to:"/dashboard/withdraw/bank-transfer",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"New Bank Withdrawal"]})})]})]}),e.jsxs("div",{className:"mb-6 flex items-center justify-end gap-2",children:[e.jsx(P,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs(L,{value:i,onValueChange:g,children:[e.jsx(R,{className:"w-[180px]",children:e.jsx(D,{placeholder:"Filter by Status"})}),e.jsxs(C,{children:[e.jsx(l,{value:"ALL",children:"All Statuses"}),e.jsx(l,{value:"PENDING",children:"Pending"}),e.jsx(l,{value:"APPROVED",children:"Approved"}),e.jsx(l,{value:"REJECTED",children:"Rejected"})]})]})]}),c?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(T,{className:"animate-spin",size:40})}):e.jsx("div",{className:"bg-sidebar rounded-lg shadow overflow-hidden",children:e.jsxs(A,{children:[e.jsx(k,{children:e.jsxs(u,{children:[e.jsx(a,{children:"Date"}),e.jsx(a,{children:"Bank Name"}),e.jsx(a,{children:"Account Name"}),e.jsx(a,{children:"Account Number"}),e.jsx(a,{children:"Amount"}),e.jsx(a,{children:"Status"}),e.jsx(a,{className:"text-right",children:"Details"})]})}),e.jsx(E,{children:x.length===0?e.jsx(u,{children:e.jsx(t,{colSpan:7,className:"text-center py-8",children:n.length===0?"No bank withdrawals found":"No bank withdrawals match your filter criteria"})}):x.map(s=>e.jsxs(u,{children:[e.jsx(t,{children:N(s.createdAt)}),e.jsx(t,{children:s.bankName}),e.jsx(t,{children:s.bankAccountName}),e.jsx(t,{className:"font-mono text-sm",children:v(s.bankAccountNumber)}),e.jsx(t,{className:"font-medium",children:b(s.amount,s.currency)}),e.jsxs(t,{children:[y(s.status),s.rejectionReason&&e.jsxs("div",{className:"text-xs text-red-500 mt-1",children:["Reason: ",s.rejectionReason]})]}),e.jsx(t,{className:"text-right",children:e.jsx(d,{variant:"ghost",size:"sm",className:"cursor-pointer text-blue-500",children:e.jsx(W,{className:"h-4 w-4"})})})]},s.id))})]})})]})}const Z=function(){return e.jsx(V,{})};export{Z as component};
