import{r as t,j as e,B as d,L as u,t as L}from"./index-Caxnq4fP.js";import{B as n}from"./badge-CH4Itv7g.js";import{T as v,a as D,b as h,c as l,d as b,e as r}from"./table-Cphr1Cof.js";import{S,a as w,b as y,c as R,d as a}from"./select-wHZoGIvI.js";import{b as T}from"./cashapp-BkjPQHFF.js";import{F}from"./filter-DnOKYwlZ.js";import{L as P}from"./loader-circle-CEWipKhR.js";import{E as I}from"./external-link-4aCqmS0M.js";import"./index-DKNBjb_u.js";import"./index-WARRLnT4.js";import"./chevron-down-B1mPT4EB.js";import"./check-PSB7j7kI.js";function B(){const[i,f]=t.useState([]),[x,p]=t.useState([]),[o,m]=t.useState(!0),[c,C]=t.useState("ALL"),j=async()=>{try{m(!0);const s=await T();f(s),p(s)}catch{L.error("Failed to fetch your Cash App deposit history")}finally{m(!1)}};t.useEffect(()=>{let s=i;c!=="ALL"&&(s=s.filter(A=>A.status===c)),p(s)},[c,i]);const g=s=>new Date(s).toLocaleString(),N=s=>`$${parseFloat(s).toFixed(2)}`,E=s=>{switch(s){case"APPROVED":case"ACTIVE":case"COMPLETED":return e.jsx(n,{className:"bg-green-500",children:s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()});case"REJECTED":case"FAILED":case"CANCELLED":return e.jsx(n,{variant:"destructive",children:s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()});case"PROCESSING":return e.jsx(n,{className:"bg-blue-500",children:s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()});default:return e.jsx(n,{variant:"outline",className:"bg-yellow-100 text-yellow-800",children:s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()})}};return t.useEffect(()=>{j()},[]),e.jsxs("div",{className:"container mx-auto py-6 md:w-[90%] lg:w-[85%] px-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"My Cash App Deposits"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(d,{asChild:!0,children:e.jsx(u,{to:"/dashboard/deposit/cash-app/new",children:"Make Deposit"})}),e.jsx(d,{onClick:j,variant:"outline",disabled:o,className:"cursor-pointer",children:o?"Loading...":"Refresh"})]})]}),e.jsxs("div",{className:"mb-6 flex items-center justify-end gap-2",children:[e.jsx(F,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs(S,{value:c,onValueChange:C,children:[e.jsx(w,{className:"w-[180px]",children:e.jsx(y,{placeholder:"Filter by Status"})}),e.jsxs(R,{children:[e.jsx(a,{value:"ALL",children:"All Statuses"}),e.jsx(a,{value:"PENDING",children:"Pending"}),e.jsx(a,{value:"PROCESSING",children:"Processing"}),e.jsx(a,{value:"APPROVED",children:"Approved"}),e.jsx(a,{value:"REJECTED",children:"Rejected"}),e.jsx(a,{value:"FAILED",children:"Failed"}),e.jsx(a,{value:"ACTIVE",children:"Active"}),e.jsx(a,{value:"COMPLETED",children:"Completed"}),e.jsx(a,{value:"CANCELLED",children:"Cancelled"})]})]})]}),o?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(P,{className:"animate-spin",size:40})}):e.jsx("div",{className:"bg-sidebar rounded-lg shadow overflow-hidden",children:e.jsxs(v,{children:[e.jsx(D,{children:e.jsxs(h,{children:[e.jsx(l,{children:"Date"}),e.jsx(l,{children:"Cashtag"}),e.jsx(l,{children:"Amount"}),e.jsx(l,{children:"Status"}),e.jsx(l,{className:"text-right",children:"Details"})]})}),e.jsx(b,{children:x.length===0?e.jsx(h,{children:e.jsx(r,{colSpan:5,className:"text-center py-8",children:i.length===0?"No Cash App deposits found":"No Cash App deposits match your filter criteria"})}):x.map(s=>e.jsxs(h,{children:[e.jsx(r,{children:g(s.createdAt)}),e.jsx(r,{className:"font-mono text-sm",children:s.cashtag}),e.jsx(r,{className:"font-medium",children:N(s.amount)}),e.jsxs(r,{children:[E(s.status),s.rejectionReason&&e.jsxs("div",{className:"text-xs text-red-500 mt-1",children:["Reason: ",s.rejectionReason]})]}),e.jsx(r,{className:"text-right",children:e.jsx(d,{asChild:!0,variant:"ghost",size:"sm",className:"cursor-pointer text-blue-500",children:e.jsx(u,{to:"/dashboard/deposit/cash-app/$cashappId",params:{cashappId:s.id},children:e.jsx(I,{className:"h-4 w-4"})})})})]},s.id))})]})})]})}const Q=function(){return e.jsx(B,{})};export{Q as component};
